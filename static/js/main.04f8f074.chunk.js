(this["webpackJsonpbangumi-ratings"]=this["webpackJsonpbangumi-ratings"]||[]).push([[0],{102:function(e,t,a){},177:function(e,t){e.exports={APPLICATION_ID:"54T0X4tWovUBdnRd6EKdW3BrN4WJrpGBEJdwDk9J",JAVASCRIPT_KEY:"WREbi60D2GfVknGhH9Je1GJ931oIhIVkHUXD9u5R",SERVER_URL:"https://parseapi.back4app.com/"}},364:function(e,t,a){e.exports=a(741)},369:function(e,t,a){},370:function(e,t,a){},599:function(e,t){},601:function(e,t){},612:function(e,t){},614:function(e,t){},641:function(e,t){},643:function(e,t){},644:function(e,t){},650:function(e,t){},652:function(e,t){},670:function(e,t){},672:function(e,t){},684:function(e,t){},687:function(e,t){},733:function(e,t,a){},734:function(e,t,a){},735:function(e,t,a){},736:function(e,t,a){},737:function(e,t,a){},738:function(e,t,a){},739:function(e,t,a){},741:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(117),c=a.n(r),i=(a(369),a(75)),o=a.n(i),u=a(148),s=a(13),m=a(64),d=a(87),E=a(231),f=Object(n.createContext)(null);function p(){return Object(n.useContext)(f)}function b(e){switch(e){case"\u540d\u79f0":return"name";case"\u96c6\u6570":return"tv_episodes";case"\u72b6\u6001":return"status";case"\u5206\u7c7b":return"genre";case"\u5267\u60c5":return"story";case"\u4f5c\u753b":return"illustration";case"\u97f3\u4e50":return"music";case"\u60c5\u6000":return"passion";case"\u8bc4\u5206":return"rating";case"\u9996\u6b21\u89c2\u770b\u65e5\u671f":return"start_date";case"\u89c2\u770b\u6b21\u6570":return"times_watched";default:return"unknown"}}function g(e,t){return e.slice().sort((function(e,a){return"start_date"===t?e[t].isValid()?a[t].isValid()?v(e[t],a[t]):-1:1:v(e[t],a[t])}))}function v(e,t){return e>t?-1:e<t?1:0}a(370),a(102);var h=function(e){var t=p(),a=t.setUser,n=t.setToken,r=t.setAuthenticated,c=Object(m.g)();return l.a.createElement(E.a,{sticky:"top",expand:"lg",id:"navbar"},l.a.createElement(E.a.Brand,{href:"/"},"\u8ffd\u756a\u8865\u756a"),l.a.createElement(d.a,{className:"mr-auto",activeKey:window.location.pathname},l.a.createElement(d.a.Item,null,l.a.createElement(d.a.Link,{href:"/#/list"},"\u6211\u7684\u5217\u8868")),l.a.createElement(d.a.Item,null,l.a.createElement(d.a.Link,{href:"/#/today"},"\u4eca\u65e5\u66f4\u65b0")),l.a.createElement(d.a.Item,null,l.a.createElement(d.a.Link,{href:"/#/calendar"},"\u770b\u756a\u65e5\u5386"))),l.a.createElement("div",{id:"signout",className:"clickable",onClick:function(){a(null),n(null),r(!1),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),c.push("/login")}},"Sign out"))},O=l.a.createContext({ratings:[],descriptions:{}}),y=a(47),j=a.n(y),k=a(177),_=a(363),w=a(37),N=a(48),S=a(362),C=a(146);function L(e){return l.a.createElement("th",{key:e.header},l.a.createElement("div",{className:"table-header"},l.a.createElement("div",null,e.header),l.a.createElement(C.b,{className:"icon clickable",onClick:e.sort})))}var V=a(119);a(733);function Y(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],c=a[1];return r?l.a.createElement("div",{className:"filter-box"},l.a.createElement("input",{className:"filter-input-box",placeholder:"\u8f93\u5165......",type:"text",onKeyPress:function(t){"Enter"===t.key&&e.filter(t)}}),l.a.createElement("div",{className:"close-button clickable",onClick:function(){e.clearFilter(),c(!r)}},"\xd7")):l.a.createElement(V.a,{className:"filter-box icon clickable",onClick:function(){return c(!r)}})}a(734);function I(e){return l.a.createElement("th",{key:e.header},l.a.createElement("div",{className:"table-header"},l.a.createElement("div",null,e.header),l.a.createElement(Y,{filter:e.filter,clearFilter:e.clearFilter})))}a(735);function D(e){return l.a.createElement("th",{key:e.header},l.a.createElement("select",{id:"status",className:"dropdown-header",name:"status",onChange:function(t){return e.filterStatus(t)}},l.a.createElement("option",{value:"",selected:!0},"\u72b6\u6001"),l.a.createElement("option",{value:"\u60f3\u770b"},"\u60f3\u770b"),l.a.createElement("option",{value:"\u5728\u770b"},"\u5728\u770b"),l.a.createElement("option",{value:"\u5df2\u770b"},"\u5df2\u770b")))}a(736);function x(e){var t=e.description;return void 0===t||null===t?l.a.createElement("p",null,"\u6682\u65e0\u7b80\u4ecb"):l.a.createElement("div",{className:"description"},l.a.createElement("div",null,l.a.createElement("h1",null,t.name,l.a.createElement("a",{href:"https://www.douban.com",target:"_blank"},l.a.createElement(V.a,{className:"icon clickable"}))),l.a.createElement("p",null,"\u8c46\u74e3\u8bc4\u5206\uff1a",t.douban),l.a.createElement("p",null,"\u5e74\u4efd\uff1a",t.year),l.a.createElement("p",null,"\u5206\u7c7b\uff1a",t.genre),l.a.createElement("p",null,"\u96c6\u6570\uff1a",t.episodes),l.a.createElement("p",null,"\u5355\u96c6\u7247\u957f\uff1a",t.episode_length),l.a.createElement("p",null,"\u7b80\u4ecb\uff1a",t.description)))}var R=a(7),A=a(32);a(737);function M(e){var t=void 0===e.oldValue||null===e.oldValue?{}:e.oldValue;return l.a.createElement(R.a,{onSubmit:function(t){e.onSubmitOrEdit(t,e.id)}},l.a.createElement(R.a.Group,{controlId:"name"},l.a.createElement(R.a.Label,null,"\u540d\u79f0"),l.a.createElement(R.a.Control,{defaultValue:t.name,type:"input"})),l.a.createElement(R.a.Group,null,l.a.createElement(R.a.Row,{className:"input-row"},l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u8c46\u74e3\u8bc4\u5206",l.a.createElement("a",{href:"https://www.douban.com",target:"_blank"},l.a.createElement(V.a,{className:"icon clickable"}))),l.a.createElement(R.a.Control,{defaultValue:t.douban,id:"douban",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u5e74\u4efd"),l.a.createElement(R.a.Control,{defaultValue:t.year,id:"year",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u72b6\u6001"),l.a.createElement(R.a.Control,{defaultValue:t.status,id:"status",type:"input"}))),l.a.createElement(R.a.Row,{className:"input-row"},l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u5206\u7c7b"),l.a.createElement(R.a.Control,{defaultValue:t.genre,id:"genre",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"TV\u96c6\u6570"),l.a.createElement(R.a.Control,{defaultValue:t.tv_episodes,id:"tv_episodes",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u5267\u573a\u7248"),l.a.createElement(R.a.Control,{defaultValue:t.movies,id:"movies",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u5355\u96c6\u7247\u957f"),l.a.createElement(R.a.Control,{defaultValue:t.episode_length,id:"episode_length",type:"input"})))),l.a.createElement(R.a.Group,null,l.a.createElement(R.a.Label,null,"\u7b80\u4ecb"),l.a.createElement(R.a.Control,{defaultValue:t.description,id:"description",as:"textarea",rows:"3"})),l.a.createElement(R.a.Group,null,l.a.createElement(R.a.Row,{className:"input-row"},l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u5267\u60c5\u8bc4\u5206"),l.a.createElement(R.a.Control,{defaultValue:t.story,id:"story",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u4f5c\u753b\u8bc4\u5206"),l.a.createElement(R.a.Control,{defaultValue:t.story,id:"illustration",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u97f3\u4e50\u8bc4\u5206"),l.a.createElement(R.a.Control,{defaultValue:t.music,id:"music",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u60c5\u6000\u8bc4\u5206"),l.a.createElement(R.a.Control,{defaultValue:t.passion,id:"passion",type:"input"})))),l.a.createElement(R.a.Group,null,l.a.createElement(R.a.Row,{className:"input-row"},l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u5f00\u59cb\u89c2\u770b\u65e5\u671f"),l.a.createElement(R.a.Control,{defaultValue:t.start_date,id:"start_date",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u7ed3\u675f\u89c2\u770b\u65e5\u671f"),l.a.createElement(R.a.Control,{defaultValue:t.end_date,id:"end_date",type:"input"})),l.a.createElement(A.a,null,l.a.createElement(R.a.Label,null,"\u89c2\u770b\u6b21\u6570"),l.a.createElement(R.a.Control,{defaultValue:t.times_watched,id:"times_watched",type:"input"})))),l.a.createElement(N.a,{className:"pink-button",type:"submit"},"\u63d0\u4ea4"))}a(738);j.a.initialize(k.APPLICATION_ID,k.JAVASCRIPT_KEY),j.a.serverURL=k.SERVER_URL;var T=function(e){var t=l.a.useContext(O),a=t.ratings,r=(t.descriptions,["\u5e8f\u53f7","\u540d\u79f0","\u96c6\u6570","\u5206\u7c7b","\u5267\u60c5","\u4f5c\u753b","\u97f3\u4e50","\u60c5\u6000","\u8bc4\u5206","\u9996\u6b21\u89c2\u770b\u65e5\u671f","\u89c2\u770b\u6b21\u6570",""]),c=["\u5e8f\u53f7","\u540d\u79f0","\u96c6\u6570","\u5206\u7c7b","\u5e74\u4efd","\u8c46\u74e3\u8bc4\u5206","\u7b80\u4ecb",""],i=Object(n.useState)(null),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(!1),E=Object(s.a)(d,2),f=E[0],p=E[1],v=Object(n.useState)(!1),h=Object(s.a)(v,2),y=h[0],j=h[1],k=Object(n.useState)(!1),V=Object(s.a)(k,2),Y=V[0],R=V[1],A=Object(n.useState)(!1),T=Object(s.a)(A,2),J=T[0],P=T[1],B=Object(n.useState)({}),G=Object(s.a)(B,2),U=G[0],H=G[1],z=Object(n.useState)(),F=Object(s.a)(z,2),W=F[0],K=F[1],Q=Object(n.useState)("\u5df2\u770b"),X=Object(s.a)(Q,2),$=X[0],q=X[1],Z=Object(n.useState)(g(a,"end_date")),ee=Object(s.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(r),le=Object(s.a)(ne,2),re=le[0],ce=le[1],ie=Object(n.useState)({}),oe=Object(s.a)(ie,2),ue=oe[0],se=oe[1],me=Object(n.useState)(),de=Object(s.a)(me,2),Ee=de[0],fe=de[1],pe=Object(n.useState)(null),be=Object(s.a)(pe,2),ge=be[0],ve=be[1];Object(n.useEffect)((function(){fe("start_date")}),[]),Object(n.useEffect)((function(){ae(a.filter((function(e){return e.status===$})))}),[e.isLoading,a,$]),Object(n.useEffect)((function(){null!==Ee&&(ae(g(a,Ee)),fe(null))}),[Ee,a]),Object(n.useEffect)((function(){if(0!==ue.length){for(var e=function(){var e=Object(s.a)(n[t],2),l=e[0],r=e[1];ae(a.filter((function(e){return e[l].includes(r)})))},t=0,n=Object.entries(ue);t<n.length;t++)e();se([])}}),[ue]);var he=function(e){var t=e.target.innerHTML;ce("\u60f3\u770b"===t?c:r),q(t)};return e.isLoading?l.a.createElement("div",{className:"loading"},l.a.createElement("div",null,"\u6b63\u5728\u52a0\u8f7d......")):e.loadError?l.a.createElement(S.a,{variant:"danger"},"\u756a\u5267\u8bc4\u5206\u52a0\u8f7d\u5931\u8d25\uff01"):l.a.createElement("div",{id:"table-wrapper"},l.a.createElement(w.a,{centered:!0,size:"lg",show:f,onHide:function(){return p(!1)}},l.a.createElement(w.a.Header,null,l.a.createElement(w.a.Title,null,"\u7b80\u4ecb")),l.a.createElement(w.a.Body,null,l.a.createElement(x,{description:u})),l.a.createElement(w.a.Footer,null,l.a.createElement(N.a,{className:"pink-button",onClick:function(){return p(!1)}},"\u5173\u95ed"))),l.a.createElement(w.a,{centered:!0,size:"lg",show:y,onHide:function(){return j(!1)}},l.a.createElement(w.a.Header,{closeButton:!0},l.a.createElement(w.a.Title,null,J?"\u6dfb\u52a0\u65b0\u756a\u5267":"\u7f16\u8f91\u756a\u5267")),l.a.createElement(w.a.Body,null,l.a.createElement(M,{onSubmitOrEdit:function(t,a){J?(t.preventDefault(),e.onAnimeSubmit(t,null,!0),j(!1)):(t.preventDefault(),e.onAnimeSubmit(t,a,!1),j(!1))},oldValue:ge,id:W}))),l.a.createElement(w.a,{centered:!0,size:"sm",show:Y,onHide:function(){return R(!1)}},l.a.createElement(w.a.Header,{closeButton:!0},l.a.createElement(w.a.Title,null,"\u5220\u9664\u756a\u5267")),l.a.createElement(w.a.Body,null,l.a.createElement("p",null,"\u786e\u5b9a\u8981\u5220\u9664\u756a\u5267\u201c".concat(U.name,"\u201d\u5417"))),l.a.createElement(w.a.Footer,null,l.a.createElement(N.a,{variant:"primary",onClick:function(){H({}),R(!1)}},"\u53d6\u6d88"),l.a.createElement(N.a,{variant:"danger",onClick:function(){e.deleteAnime(U.id),H({}),R(!1)}},"\u786e\u5b9a"))),l.a.createElement("div",{className:"button-group"},l.a.createElement("div",null,l.a.createElement(N.a,{className:"pink-button",onClick:he},"\u5df2\u770b"),l.a.createElement(N.a,{className:"pink-button",onClick:he},"\u5728\u770b"),l.a.createElement(N.a,{className:"pink-button",onClick:he},"\u60f3\u770b")),l.a.createElement("div",null,l.a.createElement(N.a,{className:"pink-button",onClick:function(){ve(null),K(null),j(!0),P(!0)}},"\u6dfb\u52a0"),l.a.createElement(N.a,{className:"pink-button",onClick:e.refresh},"\u5237\u65b0"))),l.a.createElement("div",null,l.a.createElement(_.a,{striped:!0,borderless:!0,hover:!0,size:"sm",variant:"light",id:"table"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-headers"},re.map((function(e){return"\u540d\u79f0"===e||"\u5206\u7c7b"===e?l.a.createElement(I,{header:e,filter:function(t){var a={};for(var n in ue)a[n]=ue[n];a[b(e)]=t.target.value,se(a)},clearFilter:function(){se({}),ae(a)}}):"\u72b6\u6001"===e?l.a.createElement(D,{header:e,filterStatus:function(e){se({status:e.target.value})}}):""!==e?l.a.createElement(L,{header:e,sort:function(){return fe(b(e))}}):l.a.createElement("th",null)})))),l.a.createElement("tbody",null,te.map((function(e,t){return l.a.createElement("tr",{key:e.name},l.a.createElement("td",null,t+1),l.a.createElement("td",{className:"anime-name clickable",onClick:function(t){m({name:e.name,douban:e.douban,year:e.year,genre:e.genre,episodes:e.tv_episodes,episode_length:e.episode_length,description:e.description}),p(!0)}},e.name),l.a.createElement("td",null,(r=e.tv_episodes,c=e.movies,void 0===r||void 0===c?"":0===r?"\u5267\u573a\u7248\xd7".concat(c):0===c?"".concat(r,"\u96c6"):"".concat(r,"\u96c6+\u5267\u573a\u7248\xd7").concat(c))),l.a.createElement("td",null,e.genre),l.a.createElement("td",null,"\u60f3\u770b"===$?e.year:e.story),l.a.createElement("td",null,"\u60f3\u770b"===$?e.douban:e.illustration),l.a.createElement("td",null,"\u60f3\u770b"===$?function(e){if(null!==e&&void 0!==e)return e.substring(0,20)+"......"}(e.description):e.music),"\u60f3\u770b"===$?"":l.a.createElement("td",null,e.passion),"\u60f3\u770b"===$?"":l.a.createElement("td",null,e.rating),"\u60f3\u770b"===$?"":l.a.createElement("td",null,(a=e.start_date,n=e.end_date,a.isValid()?n.isValid()?"".concat(a.format("YYYY-MM-DD")," \u81f3 ").concat(n.format("YYYY-MM-DD")):"".concat(a.format("YYYY-MM-DD"),"\u81f3\u4eca"):"")),"\u60f3\u770b"===$?"":l.a.createElement("td",null,e.times_watched),l.a.createElement("td",null,l.a.createElement(C.a,{className:"clickable",onClick:function(){K(e.id),ve({name:e.name,year:e.year,douban:e.douban,tv_episodes:e.tv_episodes,movies:e.movies,episode_length:e.episode_length,status:e.status,genre:e.genre,description:e.description,story:e.story,illustration:e.illustration,music:e.music,passion:e.passion,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD"),times_watched:e.times_watched}),P(!1),j(!0)}}),l.a.createElement(C.c,{className:"icon clickable",onClick:function(){H({name:e.name,id:e.id}),R(!0)}})));var a,n,r,c}))))))};a(739);function J(){var e=p(),t=e.setUser,a=e.setToken,r=e.setAuthenticated,c=Object(m.g)(),i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1],E=Object(n.useState)(""),f=Object(s.a)(E,2),b=f[0],g=f[1];return l.a.createElement("div",{className:"Login"},l.a.createElement(R.a,{onSubmit:function(e){e.preventDefault(),j.a.User.logIn(u,b).then((function(e){!function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))}(e,e.getSessionToken()),t(JSON.stringify(e)),a(e.getSessionToken()),r(!0),c.push("/list")})).catch((function(e){alert(e.message)}))}},l.a.createElement(R.a.Group,{size:"lg",controlId:"username"},l.a.createElement(R.a.Label,null,"Username"),l.a.createElement(R.a.Control,{autoFocus:!0,type:"username",value:u,onChange:function(e){return d(e.target.value)}})),l.a.createElement(R.a.Group,{size:"lg",controlId:"password"},l.a.createElement(R.a.Label,null,"Password"),l.a.createElement(R.a.Control,{type:"password",value:b,onChange:function(e){return g(e.target.value)}})),l.a.createElement(N.a,{block:!0,size:"lg",type:"submit",disabled:!(u.length>0&&b.length>0)},"Login")))}a(740);var P=a(171),B=a(230),G=a.n(B);var U=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}()),i=Object(s.a)(c,2),d=i[0],E=i[1],p=Object(n.useState)(sessionStorage.getItem("token")||null),b=Object(s.a)(p,2),v=b[0],y=b[1],k=Object(n.useState)(!0),_=Object(s.a)(k,2),w=_[0],N=_[1],S=Object(n.useState)(!1),C=Object(s.a)(S,2),L=C[0],V=C[1],Y=Object(n.useState)([]),I=Object(s.a)(Y,2),D=I[0],x=I[1],R=Object(n.useState)({"Anime 1":{name:"Anime 1",episodes:42,status:"\u5df2\u770b",genre:"\u604b\u7231",description:"This is a description the anime."}}),A=Object(s.a)(R,2),M=A[0],B=(A[1],function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(!0),t=j.a.Object.extend("Ratings"),(a=new j.a.Query(t)).limit(1e3),a.find().then((function(e){if(console.log("calling server"),"undefined"!==typeof document){var t=e.map((function(e){return{id:e.id,name:e.get("name"),year:e.get("year"),douban:e.get("douban"),tv_episodes:e.get("tv_episodes"),movies:e.get("movies"),episode_length:e.get("episode_length"),status:e.get("status"),genre:e.get("genre"),description:e.get("description"),story:e.get("story"),illustration:e.get("illustration"),music:e.get("music"),passion:e.get("passion"),rating:Number((e.get("story")+e.get("illustration")+e.get("music")+e.get("passion")).toFixed(1)),start_date:G()(e.get("start_date"),"YYYY-MM-DD"),end_date:G()(e.get("end_date"),"YYYY-MM-DD"),times_watched:e.get("times_watched")}}));x(g(t,"start_date")),N(!1)}}),(function(e){N(!1),V(!0),"undefined"!==typeof document&&document.write("Error while fetching ParseObjects: ".concat(JSON.stringify(e))),console.error("Error while fetching ParseObjects",e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),U=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,l,r,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=j.a.Object.extend("Ratings"),n=new a,l=0,r=Object.entries(t);l<r.length;l++)c=Object(s.a)(r[l],2),i=c[0],u=c[1],n.set(i,u);n.save().then((function(e){console.log(e),alert("\u5df2\u63d0\u4ea4\u66f4\u65b0\uff01"),B()}),(function(e){console.log(e),alert("\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(a),console.log(t),n=j.a.Object.extend("Ratings"),new j.a.Query(n).get(t).then((function(e){for(var t=0,n=Object.entries(a);t<n.length;t++){var l=Object(s.a)(n[t],2),r=l[0],c=l[1];console.log("here"),e.set(r,c)}e.save().then((function(e){console.log(e),alert("\u5df2\u63d0\u4ea4\u66f4\u65b0\uff01"),B()}),(function(e){console.log(e),alert("\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002")}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=j.a.Object.extend("Ratings"),new j.a.Query(a).get(t).then((function(e){e.destroy().then((function(e){console.log(e),alert("\u5df2\u5220\u9664\u756a\u5267\uff01"),B()}),(function(e){console.log(e),alert("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002")}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null!=d&&null!=v&&(r(!0),B())}),[]),Object(n.useEffect)((function(){a&&B()}),[a]),l.a.createElement("div",null,l.a.createElement("div",{className:"App"},l.a.createElement(f.Provider,{value:{authenticated:a,user:d,token:v,setUser:E,setToken:y,setAuthenticated:r}},l.a.createElement(P.a,null,l.a.createElement(h,null),l.a.createElement(m.d,null,l.a.createElement(O.Provider,{value:{ratings:D,descriptions:M}},l.a.createElement(m.b,{path:"/login"},l.a.createElement(J,null)),l.a.createElement(m.b,{path:"/list"},a?l.a.createElement(T,{isLoading:w,loadError:L,refresh:B,onAnimeSubmit:function(e,t,a){e.preventDefault();var n=e.target.elements,l={name:n.name.value,year:n.year.value,douban:Number(n.douban.value),tv_episodes:Number(n.tv_episodes.value),movies:Number(n.movies.value),episode_length:Number(n.episode_length.value),status:n.status.value,genre:n.genre.value,description:n.description.value,story:Number(n.story.value),illustration:Number(n.illustration.value),music:Number(n.music.value),passion:Number(n.passion.value),start_date:n.start_date.value,end_date:n.end_date.value,times_watched:Number(n.times_watched.value)};a?U(l):H(t,l)},deleteAnime:z}):l.a.createElement(m.a,{to:"/login"})),l.a.createElement(m.b,{path:"/today"},l.a.createElement("div",{className:"loading"},"\u5f00\u53d1\u4e2d")),l.a.createElement(m.b,{path:"/calendar"},l.a.createElement("div",{className:"loading"},"\u5f00\u53d1\u4e2d"))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[364,1,2]]]);
//# sourceMappingURL=main.04f8f074.chunk.js.map